// SPDX-FileCopyrightText: 2022 Demerzel Solutions Limited
// SPDX-License-Identifier: LGPL-3.0-only

using System.Collections.Generic;
using System.Reflection.Metadata;

namespace Nethermind.Evm.Precompiles.Bls
{
    /// <summary>
    /// https://eips.ethereum.org/EIPS/eip-2537
    /// </summary>
    internal static class Discount
    {
        public static int ForG1(int k) => k >= 128 ? _maxDiscountG1 : _discountTable[k].g1;
        public static int ForG2(int k) => k >= 128 ? _maxDiscountG2 : _discountTable[k].g2;

        private const int _maxDiscountG1 = 435;
        private const int _maxDiscountG2 = 696;

        private static readonly (int g1, int g2)[] _discountTable =
        {
            (0, 0), // 0
            (1000, 1800), // 1
            (949, 1776), // 2
            (848, 1528), // 3
            (797, 1282), // 4
            (764, 1188), // 5
            (750, 1368), // 6
            (738, 1250), // 7
            (728, 1133), // 8
            (719, 1095), // 9
            (712, 1269), // 10
            (705, 1224), // 11
            (698, 1182), // 12
            (692, 1137), // 13
            (687, 1274), // 14
            (682, 1222), // 15
            (677, 1169), // 16
            (673, 1155), // 17
            (669, 1141), // 18
            (665, 1127), // 19
            (661, 1113), // 20
            (658, 1256), // 21
            (654, 1240), // 22
            (651, 1224), // 23
            (648, 1208), // 24
            (645, 1192), // 25
            (642, 1176), // 26
            (640, 1156), // 27
            (637, 1140), // 28
            (635, 1124), // 29
            (632, 1108), // 30
            (630, 1092), // 31
            (627, 1076), // 32
            (625, 1072), // 33
            (623, 1064), // 34
            (621, 1060), // 35
            (619, 1052), // 36
            (617, 1048), // 37
            (615, 1040), // 38
            (613, 1036), // 39
            (611, 1028), // 40
            (609, 1024), // 41
            (608, 1016), // 42
            (606, 1012), // 43
            (604, 1004), // 44
            (603, 1000), // 45
            (601, 992), // 46
            (599, 988), // 47
            (598, 980), // 48
            (596, 976), // 49
            (595, 968), // 50
            (593, 964), // 51
            (592, 956), // 52
            (591, 952), // 53
            (589, 944), // 54
            (588, 940), // 55
            (586, 932), // 56
            (585, 928), // 57
            (584, 924), // 58
            (582, 916), // 59
            (581, 912), // 60
            (580, 904), // 61
            (579, 900), // 62
            (577, 892), // 63
            (576, 888), // 64
            (575, 884), // 65
            (574, 880), // 66
            (573, 876), // 67
            (572, 876), // 68
            (570, 872), // 69
            (569, 868), // 70
            (568, 864), // 71
            (567, 864), // 72
            (566, 860), // 73
            (565, 856), // 74
            (564, 852), // 75
            (563, 852), // 76
            (562, 848), // 77
            (561, 844), // 78
            (560, 844), // 79
            (559, 840), // 80
            (558, 836), // 81
            (557, 832), // 82
            (556, 832), // 83
            (555, 828), // 84
            (554, 824), // 85
            (553, 820), // 86
            (552, 820), // 87
            (551, 816), // 88
            (550, 812), // 89
            (549, 808), // 90
            (548, 808), // 91
            (547, 804), // 92
            (547, 800), // 93
            (546, 796), // 94
            (545, 796), // 95
            (544, 792), // 96
            (543, 788), // 97
            (542, 784), // 98
            (541, 784), // 99
            (540, 780), // 100
            (540, 776), // 101
            (539, 772), // 102
            (538, 772), // 103
            (537, 768), // 104
            (536, 764), // 105
            (536, 764), // 106
            (535, 760), // 107
            (534, 756), // 108
            (533, 752), // 109
            (532, 752), // 110
            (532, 748), // 111
            (531, 744), // 112
            (530, 740), // 113
            (529, 740), // 114
            (528, 736), // 115
            (528, 732), // 116
            (527, 728), // 117
            (526, 728), // 118
            (525, 724), // 119
            (525, 720), // 120
            (524, 716), // 121
            (523, 716), // 122
            (522, 712), // 123
            (522, 708), // 124
            (521, 704), // 125
            (520, 704), // 126
            (520, 700), // 127
            (519, 696) // 128
        };
    }
}
