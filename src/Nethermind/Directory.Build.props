<Project>

  <Import Project="../../Directory.Build.props" />

  <PropertyGroup Label="ProductInfo">
    <SourceDateEpoch>$(SOURCE_DATE_EPOCH)</SourceDateEpoch>
    <SourceDateEpoch Condition="'$(SourceDateEpoch)' == ''">$([System.DateTimeOffset]::UtcNow.ToUnixTimeSeconds())</SourceDateEpoch>
    <VersionPrefix>1.37.0</VersionPrefix>
    <VersionSuffix>unstable</VersionSuffix>
  </PropertyGroup>

  <ItemGroup Label="AssemblyCustomMetadata">
    <AssemblyAttribute Include="System.Reflection.AssemblyMetadataAttribute">
      <_Parameter1>SourceDateEpoch</_Parameter1>
      <_Parameter2>$(SourceDateEpoch)</_Parameter2>
    </AssemblyAttribute>
  </ItemGroup>

  <PropertyGroup>
    <DefineConstants>$(DefineConstants);NOT_ZKVM</DefineConstants>
  </PropertyGroup>

  <PropertyGroup Condition="$(DefineConstants.Contains('ZKVM'))">
    <DefineConstants>
      $([System.String]::Copy('$(DefineConstants)')
      .Replace('NOT_ZKVM;', '')
      .Replace(';NOT_ZKVM', '')
      .Replace('NOT_ZKVM', '')
      .Trim(';'))
    </DefineConstants>
  </PropertyGroup>
</Project>
